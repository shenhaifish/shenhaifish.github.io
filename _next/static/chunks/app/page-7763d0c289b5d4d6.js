(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{729:function(e,t,s){Promise.resolve().then(s.bind(s,2449))},2449:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return W}});var a=s(7437),i=s(2265),l=s(8509),n=s(5348),r=s(4277),o=s(3868);let c="hasClosedAnnouncement_v3";function d(){let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{localStorage.getItem(c)||t(!0)},[]),(0,a.jsx)(n.M,{children:e&&(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",padding:"20px"},children:(0,a.jsxs)(l.E.div,{initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},className:"glass",style:{width:"100%",maxWidth:"400px",padding:"24px",position:"relative",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,a.jsxs)("div",{className:"title",style:{display:"flex",alignItems:"center",gap:"12px",fontWeight:700,fontSize:"18px",color:"var(--accent)"},children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,a.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,a.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,a.jsx)("span",{children:"公告"})]}),(0,a.jsxs)("div",{style:{color:"var(--text)",lineHeight:"1.6",fontSize:"15px"},children:["感谢大家反馈的需求，现已增加如下功能：",(0,a.jsx)("p",{children:"1. 基金目录分组。"}),"关于大家反馈比较多的以下功能会在下一个版本上线：",(0,a.jsx)("p",{children:"1. 当日实际涨跌幅。"}),(0,a.jsx)("p",{children:"2. 持仓金额计算。"}),"每一个功能的加入都会去精细设计它的UI和交互，以符合项目整体的简约风格，所以请大家敬请期待。"]}),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:(0,a.jsx)("button",{className:"button",onClick:()=>{localStorage.setItem(c,"true"),t(!1)},style:{width:"100%",justifyContent:"center",display:"flex",alignItems:"center"},children:"我知道了"})})]})})})}function h(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function m(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{d:"M3 6h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M8 6l1-2h6l1 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M6 6l1 13a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M10 11v6M14 11v6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function u(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M19.4 15a7.97 7.97 0 0 0 .1-2l2-1.5-2-3.5-2.3.5a8.02 8.02 0 0 0-1.7-1l-.4-2.3h-4l-.4 2.3a8.02 8.02 0 0 0-1.7 1l-2.3-.5-2 3.5 2 1.5a7.97 7.97 0 0 0 .1 2l-2 1.5 2 3.5 2.3-.5a8.02 8.02 0 0 0 1.7 1l.4 2.3h4l.4-2.3a8.02 8.02 0 0 0 1.7-1l2.3.5 2-3.5-2-1.5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function p(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{d:"M4 12a8 8 0 0 1 12.5-6.9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M16 5h3v3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M20 12a8 8 0 0 1-12.5 6.9",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M8 19H5v-3",stroke:"currentColor",strokeWidth:"2"})]})}function x(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function g(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M3 7h18M6 12h12M9 17h6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function y(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"2"})]})}function j(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function f(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function v(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function b(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M4 8h16M4 12h16M4 16h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function w(e){return(0,a.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function N(e){let{filled:t,...s}=e;return(0,a.jsx)("svg",{...s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:t?"var(--accent)":"none",children:(0,a.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",stroke:"var(--accent)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function k(e){let{label:t,value:s,delta:i}=e;return(0,a.jsxs)("div",{className:"stat",children:[(0,a.jsx)("span",{className:"label",children:t}),(0,a.jsx)("span",{className:"value ".concat(i>0?"up":i<0?"down":""),children:s})]})}function S(e){let{onClose:t}=e,[s,n]=(0,i.useState)(!1),[r,o]=(0,i.useState)(!1),[c,d]=(0,i.useState)(""),h=async e=>{var t;e.preventDefault(),n(!0),d("");let s=new FormData(e.target);(null===(t=s.get("nickname"))||void 0===t?void 0:t.trim())||s.set("nickname","匿名"),s.append("access_key","c390fbb1-77e0-4aab-a939-caa75edc7319"),s.append("subject","鱼鱼养基 - 用户反馈");try{let e=await fetch("https://api.web3forms.com/submit",{method:"POST",body:s}),t=await e.json();t.success?o(!0):d(t.message||"提交失败，请稍后再试")}catch(e){d("网络错误，请检查您的连接")}finally{n(!1)}};return(0,a.jsx)(l.E.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"意见反馈",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal feedback-modal",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)(u,{width:"20",height:"20"}),(0,a.jsx)("span",{children:"意见反馈"})]}),(0,a.jsx)("button",{className:"icon-button",onClick:t,style:{border:"none",background:"transparent"},children:(0,a.jsx)(j,{width:"20",height:"20"})})]}),r?(0,a.jsxs)("div",{className:"success-message",style:{textAlign:"center",padding:"20px 0"},children:[(0,a.jsx)("div",{style:{fontSize:"48px",marginBottom:16},children:"\uD83C\uDF89"}),(0,a.jsx)("h3",{style:{marginBottom:8},children:"感谢您的反馈！"}),(0,a.jsx)("p",{className:"muted",children:"我们已收到您的建议，会尽快查看。"}),(0,a.jsx)("button",{className:"button",onClick:t,style:{marginTop:24,width:"100%"},children:"关闭"})]}):(0,a.jsxs)("form",{onSubmit:h,className:"feedback-form",children:[(0,a.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,a.jsx)("label",{htmlFor:"nickname",className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:"您的昵称（可选）"}),(0,a.jsx)("input",{id:"nickname",type:"text",name:"nickname",className:"input",placeholder:"匿名",style:{width:"100%"}})]}),(0,a.jsxs)("div",{className:"form-group",style:{marginBottom:20},children:[(0,a.jsx)("label",{htmlFor:"message",className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:"反馈内容"}),(0,a.jsx)("textarea",{id:"message",name:"message",className:"input",required:!0,placeholder:"请描述您遇到的问题或建议...",style:{width:"100%",minHeight:"120px",padding:"12px",resize:"vertical"}})]}),c&&(0,a.jsx)("div",{className:"error-text",style:{marginBottom:16,textAlign:"center"},children:c}),(0,a.jsx)("button",{className:"button",type:"submit",disabled:s,style:{width:"100%"},children:s?"发送中...":"提交反馈"}),(0,a.jsx)("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid var(--border)",textAlign:"center"},children:(0,a.jsxs)("p",{className:"muted",style:{fontSize:"12px",lineHeight:"1.6"},children:["如果您有 Github 账号，也可以在本项目",(0,a.jsx)("a",{href:"https://github.com/hzm0321/real-time-fund/issues",target:"_blank",rel:"noopener noreferrer",className:"link-button",style:{color:"var(--primary)",textDecoration:"underline",padding:"0 4px",fontWeight:600},children:"Issues"}),"区留言互动"]})})]})]})})}function C(e){let{failures:t,onClose:s}=e;return(0,a.jsx)(l.E.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"添加结果",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"title",style:{marginBottom:12,justifyContent:"space-between"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)(u,{width:"20",height:"20"}),(0,a.jsx)("span",{children:"部分基金添加失败"})]}),(0,a.jsx)("button",{className:"icon-button",onClick:s,style:{border:"none",background:"transparent"},children:(0,a.jsx)(j,{width:"20",height:"20"})})]}),(0,a.jsx)("div",{className:"muted",style:{marginBottom:12,fontSize:"14px"},children:"未获取到估值数据的基金如下："}),(0,a.jsx)("div",{className:"list",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"item",children:[(0,a.jsx)("span",{className:"name",children:e.name||"未知名称"}),(0,a.jsx)("div",{className:"values",children:(0,a.jsxs)("span",{className:"badge",children:["#",e.code]})})]},t))}),(0,a.jsx)("div",{className:"row",style:{justifyContent:"flex-end",marginTop:16},children:(0,a.jsx)("button",{className:"button",onClick:s,children:"知道了"})})]})})}function z(e){let{fund:t,onClose:s,onSave:n}=e,[r,o]=(0,i.useState)(t.holdingAmount||""),[c,d]=(0,i.useState)(t.accumulatedProfit||""),[h,m]=(0,i.useState)("");return(0,a.jsx)(l.E.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:[.4,0,.2,1]},children:(0,a.jsxs)(l.E.div,{className:"glass card modal",onClick:e=>e.stopPropagation(),initial:{opacity:0,scale:.96,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:10},transition:{duration:.15,ease:[.4,0,.2,1]},children:[(0,a.jsxs)("div",{className:"title",style:{marginBottom:12,justifyContent:"space-between"},children:[(0,a.jsx)("span",{children:"编辑持有信息"}),(0,a.jsx)("button",{className:"icon-button",onClick:s,children:(0,a.jsx)(j,{width:"20",height:"20"})})]}),(0,a.jsxs)("div",{style:{marginBottom:16},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"var(--muted)"},children:"持有金额（元）"}),(0,a.jsx)("input",{type:"text",inputMode:"decimal",placeholder:"请输入持有金额，留空则不显示收益",value:r,onChange:e=>o(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"var(--text)",fontSize:"14px"}})]}),(0,a.jsxs)("div",{style:{marginBottom:16},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"var(--muted)"},children:"累计收益（元）"}),(0,a.jsx)("input",{type:"text",inputMode:"decimal",placeholder:"请输入累计收益（盈利为正数，亏损为负数）",value:c,onChange:e=>d(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"var(--text)",fontSize:"14px"}}),(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",marginTop:"4px"},children:"填写您在此基金上已经赚取或亏损的金额"})]}),h&&(0,a.jsx)("div",{style:{color:"var(--danger)",fontSize:"12px",marginBottom:12},children:h}),(0,a.jsxs)("div",{className:"row",style:{gap:12,justifyContent:"flex-end"},children:[(0,a.jsx)("button",{className:"button secondary",onClick:s,children:"取消"}),(0,a.jsx)("button",{className:"button",onClick:()=>{let e=parseFloat(r),t=parseFloat(c);if(r&&(isNaN(e)||e<=0)){m("请输入有效的持有金额");return}if(c&&isNaN(t)){m("请输入有效的累计收益");return}n(e||null,t||null)},children:"保存"})]})]})})}function M(e){let{onClose:t,searchTerm:s,setSearchTerm:i,searchResults:r,selectedFunds:o,setSelectedFunds:c,toggleSelectFund:d,isSearching:m,handleSearchInput:u,showDropdown:p,setShowDropdown:x,dropdownRef:g,funds:y,addFund:f,loading:v,error:b,newHoldingAmount:w,setNewHoldingAmount:N,newAccumulatedProfit:k,setNewAccumulatedProfit:S}=e;return(0,a.jsx)(l.E.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:[.4,0,.2,1]},children:(0,a.jsxs)(l.E.div,{className:"glass card modal",onClick:e=>e.stopPropagation(),initial:{opacity:0,scale:.96,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:10},transition:{duration:.15,ease:[.4,0,.2,1]},style:{maxWidth:"600px",width:"90%"},children:[(0,a.jsxs)("div",{className:"title",style:{marginBottom:16,justifyContent:"space-between"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)(h,{width:"20",height:"20"}),(0,a.jsx)("span",{children:"添加基金"})]}),(0,a.jsx)("button",{className:"icon-button",onClick:t,children:(0,a.jsx)(j,{width:"20",height:"20"})})]}),(0,a.jsx)("div",{className:"search-container",ref:g,children:(0,a.jsxs)("form",{className:"form",onSubmit:f,style:{display:"flex",flexDirection:"column",gap:12},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"var(--muted)"},children:"搜索基金（支持名称或代码）"}),(0,a.jsxs)("div",{className:"search-input-wrapper",style:{display:"flex",flexDirection:"column",gap:8},children:[o.length>0&&(0,a.jsx)("div",{className:"selected-inline-chips",children:(0,a.jsxs)("div",{className:"fund-chip",children:[(0,a.jsx)("span",{children:o[0].NAME}),(0,a.jsx)("button",{onClick:()=>c([]),className:"remove-chip",type:"button",children:(0,a.jsx)(j,{width:"14",height:"14"})})]})}),(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)("input",{className:"input",placeholder:"搜索基金名称或代码...",value:s,onChange:u,onFocus:()=>x(!0),style:{width:"100%",padding:"10px 12px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"var(--text)",fontSize:"14px"}}),m&&(0,a.jsx)("div",{className:"search-spinner",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)"}})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"var(--muted)"},children:"持有金额（可选）"}),(0,a.jsx)("input",{type:"text",inputMode:"decimal",placeholder:"请输入持有金额",value:w,onChange:e=>N(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"var(--text)",fontSize:"14px"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:"14px",color:"var(--muted)"},children:"累计收益（可选）"}),(0,a.jsx)("input",{type:"text",inputMode:"decimal",placeholder:"请输入累计收益（盈利为正数，亏损为负数）",value:k,onChange:e=>S(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255, 255, 255, 0.05)",color:"var(--text)",fontSize:"14px"}}),(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",marginTop:"4px"},children:"填写您在此基金上已经赚取或亏损的金额，系统会加上今日收益计算持仓收益"})]}),(0,a.jsx)(n.M,{children:p&&(s.trim()||r.length>0)&&(0,a.jsx)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"search-dropdown glass",style:{position:"relative",maxHeight:"300px",overflowY:"auto"},children:r.length>0?(0,a.jsx)("div",{className:"search-results",children:r.map(e=>{let t=o.some(t=>t.CODE===e.CODE),s=y.some(t=>t.code===e.CODE);return(0,a.jsxs)("div",{className:"search-item ".concat(t?"selected":""," ").concat(s?"added":""),onClick:()=>{s||(d(e),x(!1))},children:[(0,a.jsxs)("div",{className:"fund-info",children:[(0,a.jsx)("span",{className:"fund-name",children:e.NAME}),(0,a.jsxs)("span",{className:"fund-code muted",children:["#",e.CODE," | ",e.TYPE]})]}),s?(0,a.jsx)("span",{className:"added-label",children:"已添加"}):t?(0,a.jsx)("span",{className:"added-label",style:{background:"var(--primary)",color:"#fff"},children:"已选择"}):null]},e.CODE)})}):s.trim()?(0,a.jsx)("div",{style:{padding:"20px",textAlign:"center",color:"var(--muted)"},children:"未找到相关基金"}):null})}),b&&(0,a.jsx)("div",{style:{color:"var(--danger)",fontSize:"12px"},children:b}),(0,a.jsxs)("div",{className:"row",style:{gap:12,justifyContent:"flex-end",marginTop:8},children:[(0,a.jsx)("button",{className:"button secondary",type:"button",onClick:t,children:"取消"}),(0,a.jsx)("button",{className:"button",type:"submit",disabled:v,children:v?"添加中…":"添加"})]})]})})]})})}function I(e){let{message:t,onClose:s}=e;return(0,a.jsx)(l.E.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"成功提示",onClick:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(l.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"success-message",style:{textAlign:"center",padding:"20px 0"},children:[(0,a.jsx)("div",{style:{fontSize:"48px",marginBottom:16},children:"\uD83C\uDF89"}),(0,a.jsx)("h3",{style:{marginBottom:8},children:t}),(0,a.jsx)("p",{className:"muted",children:"操作已完成，您可以继续使用。"}),(0,a.jsx)("button",{className:"button",onClick:s,style:{marginTop:24,width:"100%"},children:"关闭"})]})})})}function E(e){let{title:t,message:s,onConfirm:i,onCancel:n}=e;return(0,a.jsx)(l.E.div,{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{zIndex:10002},children:(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"400px"},onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"title",style:{marginBottom:12},children:[(0,a.jsx)(m,{width:"20",height:"20",className:"danger"}),(0,a.jsx)("span",{children:t})]}),(0,a.jsx)("p",{className:"muted",style:{marginBottom:24,fontSize:"14px",lineHeight:"1.6"},children:s}),(0,a.jsxs)("div",{className:"row",style:{gap:12},children:[(0,a.jsx)("button",{className:"button secondary",onClick:n,style:{flex:1,background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:"取消"}),(0,a.jsx)("button",{className:"button danger",onClick:i,style:{flex:1},children:"确定删除"})]})]})})}function A(e){let{groups:t,onClose:s,onSave:c}=e,[d,p]=(0,i.useState)(t),[x,g]=(0,i.useState)(null),y=(e,t)=>{let s=(t||"").slice(0,8);p(t=>t.map(t=>t.id===e?{...t,name:s}:t))},f=(e,s)=>{let a=d.find(t=>t.id===e),i=!t.find(t=>t.id===e),l=a&&(!a.codes||0===a.codes.length);i||l?p(t=>t.filter(t=>t.id!==e)):g({id:e,name:s})},v=d.every(e=>""!==e.name.trim());return(0,a.jsxs)(l.E.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"管理分组",onClick:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"500px",width:"90vw"},onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)(u,{width:"20",height:"20"}),(0,a.jsx)("span",{children:"管理分组"})]}),(0,a.jsx)("button",{className:"icon-button",onClick:s,style:{border:"none",background:"transparent"},children:(0,a.jsx)(j,{width:"20",height:"20"})})]}),(0,a.jsxs)("div",{className:"group-manage-list-container",style:{maxHeight:"60vh",overflowY:"auto",paddingRight:"4px"},children:[0===d.length?(0,a.jsxs)("div",{className:"empty-state muted",style:{textAlign:"center",padding:"40px 0"},children:[(0,a.jsx)("div",{style:{fontSize:"32px",marginBottom:12,opacity:.5},children:"\uD83D\uDCC2"}),(0,a.jsx)("p",{children:"暂无自定义分组"})]}):(0,a.jsx)(r.M,{axis:"y",values:d,onReorder:e=>{p(e)},className:"group-manage-list",children:(0,a.jsx)(n.M,{mode:"popLayout",children:d.map(e=>(0,a.jsxs)(o.e,{value:e,className:"group-manage-item glass",layout:!0,initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:500,damping:35,mass:1,layout:{duration:.2}},children:[(0,a.jsx)("div",{className:"drag-handle",style:{cursor:"grab",display:"flex",alignItems:"center",padding:"0 8px"},children:(0,a.jsx)(b,{width:"18",height:"18",className:"muted"})}),(0,a.jsx)("input",{className:"input group-rename-input ".concat(e.name.trim()?"":"error"),value:e.name,onChange:t=>y(e.id,t.target.value),placeholder:"请输入分组名称...",style:{flex:1,height:"36px",background:"rgba(0,0,0,0.2)",border:e.name.trim()?"none":"1px solid var(--danger)"}}),(0,a.jsx)("button",{className:"icon-button danger",onClick:()=>f(e.id,e.name),title:"删除分组",style:{width:"36px",height:"36px",flexShrink:0},children:(0,a.jsx)(m,{width:"16",height:"16"})})]},e.id))})}),(0,a.jsxs)("button",{className:"add-group-row-btn",onClick:()=>{let e={id:"group_".concat(Date.now()),name:"",codes:[]};p(t=>[...t,e])},style:{width:"100%",marginTop:12,padding:"10px",borderRadius:"12px",border:"1px dashed var(--border)",background:"rgba(255,255,255,0.02)",color:"var(--muted)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[(0,a.jsx)(h,{width:"16",height:"16"}),(0,a.jsx)("span",{children:"新增分组"})]})]}),(0,a.jsxs)("div",{style:{marginTop:24},children:[!v&&(0,a.jsx)("div",{className:"error-text",style:{marginBottom:12,textAlign:"center"},children:"所有分组名称均不能为空"}),(0,a.jsx)("button",{className:"button",onClick:()=>{d.some(e=>!e.name.trim())||(c(d),s())},disabled:!v,style:{width:"100%",opacity:v?1:.6},children:"完成"})]})]}),(0,a.jsx)(n.M,{children:x&&(0,a.jsx)(E,{title:"删除确认",message:'确定要删除分组 "'.concat(x.name,'" 吗？分组内的基金不会被删除。'),onConfirm:()=>{x&&(p(e=>e.filter(e=>e.id!==x.id)),g(null))},onCancel:()=>g(null)})})]})}function B(e){let{allFunds:t,currentGroupCodes:s,onClose:n,onAdd:r}=e,[o,c]=(0,i.useState)(new Set),d=(t||[]).filter(e=>!(s||[]).includes(e.code)),m=e=>{c(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})};return(0,a.jsx)(l.E.div,{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"500px",width:"90vw"},onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)(h,{width:"20",height:"20"}),(0,a.jsx)("span",{children:"添加基金到分组"})]}),(0,a.jsx)("button",{className:"icon-button",onClick:n,style:{border:"none",background:"transparent"},children:(0,a.jsx)(j,{width:"20",height:"20"})})]}),(0,a.jsx)("div",{className:"group-manage-list-container",style:{maxHeight:"50vh",overflowY:"auto",paddingRight:"4px"},children:0===d.length?(0,a.jsx)("div",{className:"empty-state muted",style:{textAlign:"center",padding:"40px 0"},children:(0,a.jsx)("p",{children:"所有基金已在该分组中"})}):(0,a.jsx)("div",{className:"group-manage-list",children:d.map(e=>(0,a.jsxs)("div",{className:"group-manage-item glass ".concat(o.has(e.code)?"selected":""),onClick:()=>m(e.code),style:{cursor:"pointer"},children:[(0,a.jsx)("div",{className:"checkbox",style:{marginRight:12},children:o.has(e.code)&&(0,a.jsx)("div",{className:"checked-mark"})}),(0,a.jsxs)("div",{className:"fund-info",style:{flex:1},children:[(0,a.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,a.jsxs)("div",{className:"muted",style:{fontSize:"12px"},children:["#",e.code]})]})]},e.code))})}),(0,a.jsxs)("div",{className:"row",style:{marginTop:24,gap:12},children:[(0,a.jsx)("button",{className:"button secondary",onClick:n,style:{flex:1,background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:"取消"}),(0,a.jsxs)("button",{className:"button",onClick:()=>r(Array.from(o)),disabled:0===o.size,style:{flex:1},children:["确定 (",o.size,")"]})]})]})})}function L(e){let{onClose:t,onConfirm:s}=e,[n,r]=(0,i.useState)("");return(0,a.jsx)(l.E.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"新增分组",onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"400px"},onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)(h,{width:"20",height:"20"}),(0,a.jsx)("span",{children:"新增分组"})]}),(0,a.jsx)("button",{className:"icon-button",onClick:t,style:{border:"none",background:"transparent"},children:(0,a.jsx)(j,{width:"20",height:"20"})})]}),(0,a.jsxs)("div",{className:"form-group",style:{marginBottom:20},children:[(0,a.jsx)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:"分组名称（最多 8 个字）"}),(0,a.jsx)("input",{className:"input",autoFocus:!0,placeholder:"请输入分组名称...",value:n,onChange:e=>{r((e.target.value||"").slice(0,8))},onKeyDown:e=>{"Enter"===e.key&&n.trim()&&s(n.trim())}})]}),(0,a.jsxs)("div",{className:"row",style:{gap:12},children:[(0,a.jsx)("button",{className:"button secondary",onClick:t,style:{flex:1,background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:"取消"}),(0,a.jsx)("button",{className:"button",onClick:()=>n.trim()&&s(n.trim()),disabled:!n.trim(),style:{flex:1},children:"确定"})]})]})})}function W(){var e;let[t,s]=(0,i.useState)([]),[r,o]=(0,i.useState)(!1),[c,j]=(0,i.useState)(""),b=(0,i.useRef)(null),E=(0,i.useRef)(!1),[W,P]=(0,i.useState)(3e4),[O,F]=(0,i.useState)(!1),[D,R]=(0,i.useState)(30),[T,J]=(0,i.useState)(!1),[G,_]=(0,i.useState)(new Set),[H,Y]=(0,i.useState)(new Set),[U,q]=(0,i.useState)([]),[V,X]=(0,i.useState)("all"),[$,K]=(0,i.useState)(!1),[Z,Q]=(0,i.useState)(!1),[ee,et]=(0,i.useState)(!1),[es,ea]=(0,i.useState)(null),[ei,el]=(0,i.useState)("default"),[en,er]=(0,i.useState)("card"),[eo,ec]=(0,i.useState)(!1),[ed,eh]=(0,i.useState)(0),[em,eu]=(0,i.useState)(""),[ep,ex]=(0,i.useState)([]),[eg,ey]=(0,i.useState)([]),[ej,ef]=(0,i.useState)(!1),ev=(0,i.useRef)(null),eb=(0,i.useRef)(null),[ew,eN]=(0,i.useState)(!1),[ek,eS]=(0,i.useState)(!1),[eC,ez]=(0,i.useState)([]),eM=(0,i.useRef)(null),[eI,eE]=(0,i.useState)(null),[eA,eB]=(0,i.useState)(""),[eL,eW]=(0,i.useState)(""),[eP,eO]=(0,i.useState)(!1),eF=t.filter(e=>{if("all"===V)return!0;if("fav"===V)return H.has(e.code);let t=U.find(e=>e.id===V);return!t||t.codes.includes(e.code)}).sort((e,t)=>{if("yield"===ei){let s="number"==typeof e.estGszzl?e.estGszzl:Number(e.gszzl)||0;return("number"==typeof t.estGszzl?t.estGszzl:Number(t.gszzl)||0)-s}return"name"===ei?e.name.localeCompare(t.name,"zh-CN"):"code"===ei?e.code.localeCompare(t.code):0});(0,i.useEffect)(()=>{if(!eM.current)return;if("all"===V){eM.current.scrollTo({left:0,behavior:"smooth"});return}let e=eM.current.querySelector(".tab.active");e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[V]);let[eD,eR]=(0,i.useState)(!1),[eT,eJ]=(0,i.useState)(!1),[eG,e_]=(0,i.useState)(!1),[eH,eY]=(0,i.useState)(!1),eU=()=>{eR(!1)},eq=()=>{if(!eM.current)return;let e=eM.current;eJ(e.scrollWidth>e.clientWidth),e_(e.scrollLeft>0),eY(e.scrollLeft<e.scrollWidth-e.clientWidth-1)};(0,i.useEffect)(()=>{eq();let e=()=>eq();return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[U,t.length,H.size]);let[eV,eX]=(0,i.useState)({open:!1,message:""});(0,i.useEffect)(()=>{let e=e=>{eb.current&&!eb.current.contains(e.target)&&eN(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let e$=e=>{Y(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),localStorage.setItem("favorites",JSON.stringify(Array.from(s))),0===s.size&&X("all"),s})},eK=e=>{_(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),localStorage.setItem("collapsedCodes",JSON.stringify(Array.from(s))),s})},eZ=e=>{let t=U.map(t=>t.id===V?{...t,codes:t.codes.filter(t=>t!==e)}:t);q(t),localStorage.setItem("groups",JSON.stringify(t))},eQ=e=>{let t=new Set;return e.filter(e=>{let s=null==e?void 0:e.code;return!(!s||t.has(s))&&(t.add(s),!0)})},e0=e=>{if(!e.holdingAmount||"number"!=typeof e.gszzl)return null;let t=e.holdingAmount*(e.gszzl/100),s=e.accumulatedProfit||0,a=s+t,i=a/e.holdingAmount*100;return{currentValue:e.holdingAmount+a,totalProfit:a,todayProfit:t,accumulatedProfit:s,profitRate:i,todayProfitRate:e.gszzl}};(0,i.useEffect)(()=>{try{let e=JSON.parse(localStorage.getItem("funds")||"[]");if(Array.isArray(e)&&e.length){let t=eQ(e);s(t),localStorage.setItem("funds",JSON.stringify(t));let a=Array.from(new Set(t.map(e=>e.code)));a.length&&e4(a)}let t=parseInt(localStorage.getItem("refreshMs")||"30000",10);Number.isFinite(t)&&t>=5e3&&(P(t),R(Math.round(t/1e3)));let a=JSON.parse(localStorage.getItem("collapsedCodes")||"[]");Array.isArray(a)&&_(new Set(a));let i=JSON.parse(localStorage.getItem("favorites")||"[]");Array.isArray(i)&&Y(new Set(i));let l=JSON.parse(localStorage.getItem("groups")||"[]");Array.isArray(l)&&q(l);let n=localStorage.getItem("viewMode");("card"===n||"list"===n)&&er(n)}catch(e){}},[]),(0,i.useEffect)(()=>(b.current&&clearInterval(b.current),b.current=setInterval(()=>{let e=Array.from(new Set(t.map(e=>e.code)));e.length&&e4(e)},W),()=>{b.current&&clearInterval(b.current)}),[t,W]);let e1=e=>new Promise((t,s)=>{let a=document.createElement("script");a.src=e,a.async=!0,a.onload=()=>{document.body.removeChild(a),t()},a.onerror=()=>{document.body.removeChild(a),s(Error("数据加载失败"))},document.body.appendChild(a)}),e2=async e=>new Promise(async(t,s)=>{let a=e=>e.startsWith("6")||e.startsWith("9")?"sh":e.startsWith("0")||e.startsWith("3")?"sz":e.startsWith("4")||e.startsWith("8")?"bj":"sz",i="https://fundgz.1234567.com.cn/js/".concat(e,".js?rt=").concat(Date.now());"jsonpgz_".concat(e,"_").concat(Math.random().toString(36).slice(2,7));let l=document.createElement("script");l.src=i;let n=window.jsonpgz;window.jsonpgz=i=>{if(window.jsonpgz=n,!i||"object"!=typeof i){s(Error("未获取到基金估值数据"));return}let l=Number(i.gszzl),r={code:i.fundcode,name:i.name,dwjz:i.dwjz,gsz:i.gsz,gztime:i.gztime,gszzl:Number.isFinite(l)?l:i.gszzl};e1("https://fundf10.eastmoney.com/FundArchivesDatas.aspx?type=jjcc&code=".concat(e,"&topline=10&year=&month=&rt=").concat(Date.now())).then(async()=>{var e;let s=[];for(let t of((null===(e=window.apidata)||void 0===e?void 0:e.content)||"").match(/<tr[\s\S]*?<\/tr>/gi)||[]){let e=(t.match(/<td[\s\S]*?>([\s\S]*?)<\/td>/gi)||[]).map(e=>e.replace(/<[^>]*>/g,"").trim()),a=e.findIndex(e=>/^\d{6}$/.test(e)),i=e.findIndex(e=>/\d+(?:\.\d+)?\s*%/.test(e));a>=0&&i>=0&&s.push({code:e[a],name:e[a+1]||"",weight:e[i],change:null})}if((s=s.slice(0,10)).length)try{let e=s.map(e=>"s_".concat(a(e.code)).concat(e.code)).join(","),t="https://qt.gtimg.cn/q=".concat(e);await new Promise(e=>{let i=document.createElement("script");i.src=t,i.onload=()=>{s.forEach(e=>{let t="v_s_".concat(a(e.code)).concat(e.code),s=window[t];if(s){let t=s.split("~");t.length>5&&(e.change=parseFloat(t[5]))}}),document.body.contains(i)&&document.body.removeChild(i),e()},i.onerror=()=>{document.body.contains(i)&&document.body.removeChild(i),e()},document.body.appendChild(i)})}catch(e){console.error("获取股票涨跌幅失败",e)}t({...r,holdings:s})}).catch(()=>t({...r,holdings:[]}))},l.onerror=()=>{window.jsonpgz=n,document.body.contains(l)&&document.body.removeChild(l),s(Error("基金数据加载失败"))},document.body.appendChild(l),setTimeout(()=>{document.body.contains(l)&&document.body.removeChild(l)},5e3)}),e5=async e=>{if(!e.trim()){ex([]);return}ef(!0);let t="SuggestData_".concat(Date.now()),s="https://fundsuggest.eastmoney.com/FundSearch/api/FundSearchAPI.ashx?m=1&key=".concat(encodeURIComponent(e),"&callback=").concat(t,"&_=").concat(Date.now());try{await new Promise((e,a)=>{window[t]=s=>{if(s&&s.Datas){let e=s.Datas.filter(e=>700===e.CATEGORY||"700"===e.CATEGORY||"基金"===e.CATEGORYDESC);ex(e)}delete window[t],e()};let i=document.createElement("script");i.src=s,i.async=!0,i.onload=()=>{document.body.contains(i)&&document.body.removeChild(i)},i.onerror=()=>{document.body.contains(i)&&document.body.removeChild(i),delete window[t],a(Error("搜索请求失败"))},document.body.appendChild(i)})}catch(e){console.error("搜索失败",e)}finally{ef(!1)}},e4=async e=>{if(E.current)return;E.current=!0,J(!0);let t=Array.from(new Set(e));try{let e=[];for(let a of t)try{let t=await e2(a);e.push(t)}catch(t){console.error("刷新基金 ".concat(a," 失败"),t),s(t=>{let s=t.find(e=>e.code===a);return s&&e.push(s),t})}e.length>0&&s(t=>{let s=[...t];e.forEach(e=>{let t=s.findIndex(t=>t.code===e.code);if(t>-1){let a=s[t];s[t]={...e,holdingAmount:a.holdingAmount}}else s.push(e)});let a=eQ(s);return localStorage.setItem("funds",JSON.stringify(a)),a})}catch(e){console.error(e)}finally{E.current=!1,J(!1)}},e8=async e=>{var a;if(null==e||null===(a=e.preventDefault)||void 0===a||a.call(e),j(""),eA){let e=parseFloat(eA);if(isNaN(e)||e<=0){j("请输入有效的持有金额（必须大于0）");return}}if(eL&&isNaN(parseFloat(eL))){j("请输入有效的累计收益（可以是负数）");return}let i=String(em||"").split(/[^0-9A-Za-z]+/).map(e=>e.trim()).filter(e=>e.length>0),l=Array.from(new Set([...eg.map(e=>e.CODE),...i.filter(e=>/^\d{6}$/.test(e))]));if(0===l.length){j("请输入或选择基金代码");return}o(!0);try{let e=[],a=[],i={};eg.forEach(e=>{i[e.CODE]=e.NAME});let n=eA?parseFloat(eA):null,r=eL?parseFloat(eL):null;for(let s of l)if(!t.some(e=>e.code===s))try{let t=await e2(s);e.push({...t,holdingAmount:n,accumulatedProfit:r})}catch(e){a.push({code:s,name:i[s]})}if(0===e.length)j("未添加任何新基金");else{let a=eQ([...e,...t]);s(a),localStorage.setItem("funds",JSON.stringify(a)),eO(!1)}eu(""),ey([]),eN(!1),eB(""),eW(""),a.length>0&&(ez(a),eS(!0))}catch(e){j(e.message||"添加失败")}finally{o(!1)}},e3=e=>{let a=t.filter(t=>t.code!==e);s(a),localStorage.setItem("funds",JSON.stringify(a));let i=U.map(t=>({...t,codes:t.codes.filter(t=>t!==e)}));q(i),localStorage.setItem("groups",JSON.stringify(i)),_(t=>{if(!t.has(e))return t;let s=new Set(t);return s.delete(e),localStorage.setItem("collapsedCodes",JSON.stringify(Array.from(s))),s}),Y(t=>{if(!t.has(e))return t;let s=new Set(t);return s.delete(e),localStorage.setItem("favorites",JSON.stringify(Array.from(s))),0===s.size&&X("all"),s})},e6=async()=>{if(E.current)return;let e=Array.from(new Set(t.map(e=>e.code)));e.length&&await e4(e)},e9=(e,t,a)=>{s(s=>{let i=s.map(s=>s.code===e?{...s,holdingAmount:t,accumulatedProfit:a}:s);return localStorage.setItem("funds",JSON.stringify(i)),i}),eE(null)},e7=(0,i.useRef)(null),[te,tt]=(0,i.useState)(""),ts=async()=>{try{let e={version:1,funds:JSON.parse(localStorage.getItem("funds")||"[]"),favorites:JSON.parse(localStorage.getItem("favorites")||"[]"),groups:JSON.parse(localStorage.getItem("groups")||"[]"),collapsedCodes:JSON.parse(localStorage.getItem("collapsedCodes")||"[]"),refreshMs:parseInt(localStorage.getItem("refreshMs")||"30000",10),viewMode:localStorage.getItem("viewMode")||"card",exportedAt:new Date().toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});if(window.showSaveFilePicker){let e=await window.showSaveFilePicker({suggestedName:"realtime-fund-config-".concat(Date.now(),".json"),types:[{description:"JSON",accept:{"application/json":[".json"]}}]}),s=await e.createWritable();await s.write(t),await s.close(),eX({open:!0,message:"导出成功"}),F(!1);return}let s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="realtime-fund-config-".concat(Date.now(),".json");let i=!1,l=()=>{i||(i=!0,URL.revokeObjectURL(s),eX({open:!0,message:"导出成功"}),F(!1))},n=()=>{"hidden"!==document.visibilityState&&(l(),document.removeEventListener("visibilitychange",n))};document.addEventListener("visibilitychange",n,{once:!0}),a.click(),setTimeout(l,3e3)}catch(e){console.error("Export error:",e)}},ta=async e=>{try{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let i=await a.text(),l=JSON.parse(i);if(l&&"object"==typeof l){let e=JSON.parse(localStorage.getItem("funds")||"[]"),t=JSON.parse(localStorage.getItem("favorites")||"[]"),a=JSON.parse(localStorage.getItem("groups")||"[]"),i=JSON.parse(localStorage.getItem("collapsedCodes")||"[]"),n=e,r=[];if(Array.isArray(l.funds)){let t=eQ(l.funds),a=new Set(e.map(e=>e.code)),i=t.filter(e=>e&&e.code&&!a.has(e.code));r=i.map(e=>e.code),n=[...e,...i],s(n),localStorage.setItem("funds",JSON.stringify(n))}if(Array.isArray(l.favorites)){let e=Array.from(new Set([...t,...l.favorites]));Y(new Set(e)),localStorage.setItem("favorites",JSON.stringify(e))}if(Array.isArray(l.groups)){let e=[...a];l.groups.forEach(t=>{let s=e.findIndex(e=>e.id===t.id);s>-1?e[s]={...e[s],codes:Array.from(new Set([...e[s].codes,...t.codes||[]]))}:e.push(t)}),q(e),localStorage.setItem("groups",JSON.stringify(e))}if(Array.isArray(l.collapsedCodes)){let e=Array.from(new Set([...i,...l.collapsedCodes]));_(new Set(e)),localStorage.setItem("collapsedCodes",JSON.stringify(e))}if("number"==typeof l.refreshMs&&l.refreshMs>=5e3&&(P(l.refreshMs),R(Math.round(l.refreshMs/1e3)),localStorage.setItem("refreshMs",String(l.refreshMs))),("card"===l.viewMode||"list"===l.viewMode)&&(er(l.viewMode),localStorage.setItem("viewMode",l.viewMode)),r.length){let e=n.map(e=>e.code);await e4(e)}eX({open:!0,message:"导入成功"}),F(!1),e7.current&&(e7.current.value="")}}catch(e){console.error("Import error:",e),tt("导入失败，请检查文件格式"),setTimeout(()=>tt(""),4e3),e7.current&&(e7.current.value="")}};return(0,i.useEffect)(()=>(O||eo||ek||ee||Z||$||eV.open||null!==eI||eP?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[O,eo,ek,ee,Z,$,eV.open,eI,eP]),(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&O&&F(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[O]),(0,a.jsxs)("div",{className:"container content",children:[(0,a.jsx)(d,{}),(0,a.jsxs)("div",{className:"navbar glass",children:[T&&(0,a.jsx)("div",{className:"loading-bar"}),(0,a.jsxs)("div",{className:"brand",children:[(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"var(--accent)",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M5 14c2-4 7-6 14-5",stroke:"var(--primary)",strokeWidth:"2"})]}),(0,a.jsx)("span",{children:"鱼鱼养基"})]}),(0,a.jsxs)("div",{className:"actions",children:[(0,a.jsxs)("div",{className:"badge",title:"当前刷新频率",children:[(0,a.jsx)("span",{children:"刷新"}),(0,a.jsxs)("strong",{children:[Math.round(W/1e3),"秒"]})]}),(0,a.jsx)("button",{className:"icon-button","aria-label":"立即刷新",onClick:e6,disabled:T||0===t.length,"aria-busy":T,title:"立即刷新",children:(0,a.jsx)(p,{className:T?"spin":"",width:"18",height:"18"})}),(0,a.jsx)("button",{className:"icon-button","aria-label":"打开设置",onClick:()=>F(!0),title:"设置",children:(0,a.jsx)(u,{width:"18",height:"18"})})]})]}),(0,a.jsxs)("div",{className:"grid",children:[(0,a.jsx)("div",{className:"col-12",style:{display:"flex",justifyContent:"center",marginBottom:16},children:(0,a.jsxs)("button",{className:"button",onClick:()=>eO(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",fontSize:"16px"},children:[(0,a.jsx)(h,{width:"20",height:"20"}),(0,a.jsx)("span",{children:"添加基金"})]})}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsxs)("div",{className:"filter-bar",style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:12},children:[(0,a.jsxs)("div",{className:"tabs-container",children:[(0,a.jsx)("div",{className:"tabs-scroll-area","data-mask-left":eG,"data-mask-right":eH,children:(0,a.jsx)("div",{className:"tabs",ref:eM,onMouseDown:e=>{eM.current&&eR(!0)},onMouseLeave:eU,onMouseUp:eU,onMouseMove:e=>{eD&&eM.current&&(e.preventDefault(),eM.current.scrollLeft-=e.movementX)},onWheel:e=>{if(!eM.current)return;let t=Math.abs(e.deltaX)>Math.abs(e.deltaY)?e.deltaX:e.deltaY;eM.current.scrollLeft+=t},onScroll:eq,children:(0,a.jsxs)(n.M,{mode:"popLayout",children:[(0,a.jsxs)(l.E.button,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"tab ".concat("all"===V?"active":""),onClick:()=>X("all"),transition:{type:"spring",stiffness:500,damping:30,mass:1},children:["全部 (",t.length,")"]},"all"),(0,a.jsxs)(l.E.button,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"tab ".concat("fav"===V?"active":""),onClick:()=>X("fav"),transition:{type:"spring",stiffness:500,damping:30,mass:1},children:["自选 (",H.size,")"]},"fav"),U.map(e=>(0,a.jsxs)(l.E.button,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"tab ".concat(V===e.id?"active":""),onClick:()=>X(e.id),transition:{type:"spring",stiffness:500,damping:30,mass:1},children:[e.name," (",e.codes.length,")"]},e.id))]})})}),U.length>0&&(0,a.jsx)("button",{className:"icon-button manage-groups-btn",onClick:()=>Q(!0),title:"管理分组",children:(0,a.jsx)(g,{width:"16",height:"16"})}),(0,a.jsx)("button",{className:"icon-button add-group-btn",onClick:()=>K(!0),title:"新增分组",children:(0,a.jsx)(h,{width:"16",height:"16"})})]}),(0,a.jsxs)("div",{className:"sort-group",style:{display:"flex",alignItems:"center",gap:12},children:[(0,a.jsxs)("div",{className:"view-toggle",style:{display:"flex",background:"rgba(255,255,255,0.05)",borderRadius:"10px",padding:"2px"},children:[(0,a.jsx)("button",{className:"icon-button ".concat("card"===en?"active":""),onClick:()=>{er("card"),localStorage.setItem("viewMode","card")},style:{border:"none",width:"32px",height:"32px",background:"card"===en?"var(--primary)":"transparent",color:"card"===en?"#05263b":"var(--muted)"},title:"卡片视图",children:(0,a.jsx)(y,{width:"16",height:"16"})}),(0,a.jsx)("button",{className:"icon-button ".concat("list"===en?"active":""),onClick:()=>{er("list"),localStorage.setItem("viewMode","list")},style:{border:"none",width:"32px",height:"32px",background:"list"===en?"var(--primary)":"transparent",color:"list"===en?"#05263b":"var(--muted)"},title:"表格视图",children:(0,a.jsx)(v,{width:"16",height:"16"})})]}),(0,a.jsx)("div",{className:"divider",style:{width:"1px",height:"20px",background:"var(--border)"}}),(0,a.jsxs)("div",{className:"sort-items",style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsxs)("span",{className:"muted",style:{fontSize:"12px",display:"flex",alignItems:"center",gap:4},children:[(0,a.jsx)(g,{width:"14",height:"14"}),"排序"]}),(0,a.jsx)("div",{className:"chips",children:[{id:"default",label:"默认"},{id:"yield",label:"涨跌幅"},{id:"name",label:"名称"},{id:"code",label:"代码"}].map(e=>(0,a.jsx)("button",{className:"chip ".concat(ei===e.id?"active":""),onClick:()=>el(e.id),style:{height:"28px",fontSize:"12px",padding:"0 10px"},children:e.label},e.id))})]})]})]}),0===eF.length?(0,a.jsxs)("div",{className:"glass card empty",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px"},children:[(0,a.jsx)("div",{style:{fontSize:"48px",marginBottom:16,opacity:.5},children:"\uD83D\uDCC2"}),(0,a.jsx)("div",{className:"muted",style:{marginBottom:20},children:0===t.length?"尚未添加基金":"该分组下暂无数据"}),"all"!==V&&"fav"!==V&&t.length>0&&(0,a.jsx)("button",{className:"button",onClick:()=>et(!0),children:"添加基金到此分组"})]}):(0,a.jsxs)(a.Fragment,{children:["all"!==V&&"fav"!==V&&(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:12},children:(0,a.jsxs)("button",{className:"button",onClick:()=>et(!0),style:{height:"32px",fontSize:"13px",padding:"0 12px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,a.jsx)(h,{width:"16",height:"16"}),(0,a.jsx)("span",{children:"添加基金"})]})}),(0,a.jsx)(n.M,{mode:"wait",children:(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card"===en?"grid":"table-container glass",children:["list"===en&&(0,a.jsxs)("div",{className:"table-header-row",children:[(0,a.jsx)("div",{className:"table-header-cell",children:"基金名称"}),(0,a.jsx)("div",{className:"table-header-cell text-right",children:"估值净值"}),(0,a.jsx)("div",{className:"table-header-cell text-right",children:"估值涨跌幅"}),(0,a.jsx)("div",{className:"table-header-cell text-right",children:"估值时间"}),(0,a.jsx)("div",{className:"table-header-cell text-right",children:"持有金额"}),(0,a.jsx)("div",{className:"table-header-cell text-right",children:"持有收益"}),(0,a.jsx)("div",{className:"table-header-cell text-right",children:"收益率"}),(0,a.jsx)("div",{className:"table-header-cell text-center",children:"操作"})]}),(0,a.jsx)("div",{className:"card"===en?"grid col-12":"",style:"card"===en?{gridColumn:"span 12",gap:16}:{},children:(0,a.jsx)(n.M,{mode:"popLayout",children:eF.map(e=>{var t,s,i,r,o;return(0,a.jsx)(l.E.div,{layout:"position",className:"card"===en?"col-6":"table-row-wrapper",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:(0,a.jsx)("div",{className:"card"===en?"glass card":"table-row",children:"list"===en?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"table-cell name-cell",children:["all"!==V&&"fav"!==V?(0,a.jsx)("button",{className:"icon-button fav-button",onClick:t=>{t.stopPropagation(),eZ(e.code)},title:"从当前分组移除",children:(0,a.jsx)(f,{width:"18",height:"18",style:{transform:"rotate(180deg)"}})}):(0,a.jsx)("button",{className:"icon-button fav-button ".concat(H.has(e.code)?"active":""),onClick:t=>{t.stopPropagation(),e$(e.code)},title:H.has(e.code)?"取消自选":"添加自选",children:(0,a.jsx)(N,{width:"18",height:"18",filled:H.has(e.code)})}),(0,a.jsxs)("div",{className:"title-text",children:[(0,a.jsx)("span",{className:"name-text",children:e.name}),(0,a.jsxs)("span",{className:"muted code-text",children:["#",e.code]})]})]}),(0,a.jsx)("div",{className:"table-cell text-right value-cell",children:(0,a.jsx)("span",{style:{fontWeight:700},children:e.estPricedCoverage>.05?e.estGsz.toFixed(4):null!==(t=e.gsz)&&void 0!==t?t:"—"})}),(0,a.jsx)("div",{className:"table-cell text-right change-cell",children:(0,a.jsx)("span",{className:e.estPricedCoverage>.05?e.estGszzl>0?"up":e.estGszzl<0?"down":"":Number(e.gszzl)>0?"up":0>Number(e.gszzl)?"down":"",style:{fontWeight:700},children:e.estPricedCoverage>.05?"".concat(e.estGszzl>0?"+":"").concat(e.estGszzl.toFixed(2),"%"):"number"==typeof e.gszzl?"".concat(e.gszzl>0?"+":"").concat(e.gszzl.toFixed(2),"%"):null!==(s=e.gszzl)&&void 0!==s?s:"—"})}),(0,a.jsx)("div",{className:"table-cell text-right time-cell",children:(0,a.jsx)("span",{className:"muted",style:{fontSize:"12px"},children:e.gztime||e.time||"-"})}),(0,a.jsx)("div",{className:"table-cell text-right",children:e.holdingAmount?(0,a.jsxs)("span",{style:{fontWeight:600},children:["\xa5",e.holdingAmount.toFixed(2)]}):(0,a.jsx)("span",{className:"muted",children:"—"})}),(()=>{let t=e0(e);return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"table-cell text-right",children:(0,a.jsxs)("span",{className:t.totalProfit>0?"up":t.totalProfit<0?"down":"",style:{fontWeight:700},children:[t.totalProfit>0?"+":"","\xa5",t.totalProfit.toFixed(2)]})}),(0,a.jsx)("div",{className:"table-cell text-right",children:(0,a.jsxs)("span",{className:t.profitRate>0?"up":t.profitRate<0?"down":"",style:{fontWeight:700},children:[t.profitRate>0?"+":"",t.profitRate.toFixed(2),"%"]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"table-cell text-right",children:(0,a.jsx)("span",{className:"muted",children:"—"})}),(0,a.jsx)("div",{className:"table-cell text-right",children:(0,a.jsx)("span",{className:"muted",children:"—"})})]})})(),(0,a.jsxs)("div",{className:"table-cell text-center action-cell",style:{gap:4},children:[(0,a.jsx)("button",{className:"icon-button",onClick:()=>eE({code:e.code,fund:e}),title:"编辑持有信息",style:{width:"28px",height:"28px"},children:(0,a.jsx)(w,{width:"14",height:"14"})}),(0,a.jsx)("button",{className:"icon-button danger",onClick:()=>e3(e.code),title:"删除",style:{width:"28px",height:"28px"},children:(0,a.jsx)(m,{width:"14",height:"14"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"row",style:{marginBottom:10},children:[(0,a.jsxs)("div",{className:"title",children:["all"!==V&&"fav"!==V?(0,a.jsx)("button",{className:"icon-button fav-button",onClick:t=>{t.stopPropagation(),eZ(e.code)},title:"从当前分组移除",children:(0,a.jsx)(f,{width:"18",height:"18",style:{transform:"rotate(180deg)"}})}):(0,a.jsx)("button",{className:"icon-button fav-button ".concat(H.has(e.code)?"active":""),onClick:t=>{t.stopPropagation(),e$(e.code)},title:H.has(e.code)?"取消自选":"添加自选",children:(0,a.jsx)(N,{width:"18",height:"18",filled:H.has(e.code)})}),(0,a.jsxs)("div",{className:"title-text",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("span",{className:"muted",children:["#",e.code]})]})]}),(0,a.jsxs)("div",{className:"actions",children:[(0,a.jsxs)("div",{className:"badge-v",children:[(0,a.jsx)("span",{children:"估值时间"}),(0,a.jsx)("strong",{children:e.gztime||e.time||"-"})]}),(0,a.jsxs)("div",{className:"row",style:{gap:4},children:[(0,a.jsx)("button",{className:"icon-button",onClick:()=>eE({code:e.code,fund:e}),title:"编辑持有信息",style:{width:"28px",height:"28px"},children:(0,a.jsx)(w,{width:"14",height:"14"})}),(0,a.jsx)("button",{className:"icon-button danger",onClick:()=>e3(e.code),title:"删除",style:{width:"28px",height:"28px"},children:(0,a.jsx)(m,{width:"14",height:"14"})})]})]})]}),(0,a.jsxs)("div",{className:"row",style:{marginBottom:12},children:[(0,a.jsx)(k,{label:"单位净值",value:null!==(i=e.dwjz)&&void 0!==i?i:"—"}),(0,a.jsx)(k,{label:"估值净值",value:e.estPricedCoverage>.05?e.estGsz.toFixed(4):null!==(r=e.gsz)&&void 0!==r?r:"—"}),(0,a.jsx)(k,{label:"估值涨跌幅",value:e.estPricedCoverage>.05?"".concat(e.estGszzl>0?"+":"").concat(e.estGszzl.toFixed(2),"%"):"number"==typeof e.gszzl?"".concat(e.gszzl>0?"+":"").concat(e.gszzl.toFixed(2),"%"):null!==(o=e.gszzl)&&void 0!==o?o:"—",delta:e.estPricedCoverage>.05?e.estGszzl:Number(e.gszzl)||0})]}),(()=>{let t=e0(e);return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"row",style:{marginBottom:12,paddingTop:12,borderTop:"1px solid rgba(255,255,255,0.1)"},children:[(0,a.jsx)(k,{label:"持有金额",value:"\xa5".concat(e.holdingAmount.toFixed(2))}),(0,a.jsx)(k,{label:"当前市值",value:"\xa5".concat(t.currentValue.toFixed(2))}),(0,a.jsx)(k,{label:"持仓收益",value:"".concat(t.totalProfit>0?"+":"","\xa5").concat(t.totalProfit.toFixed(2)),delta:t.totalProfit})]}),(0,a.jsxs)("div",{className:"row",style:{marginBottom:12,fontSize:"12px",color:"var(--muted)"},children:[(0,a.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)("span",{children:"累计收益"}),(0,a.jsxs)("span",{className:t.accumulatedProfit>0?"up":t.accumulatedProfit<0?"down":"",children:[t.accumulatedProfit>0?"+":"","\xa5",t.accumulatedProfit.toFixed(2)]})]}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)("span",{children:"今日收益"}),(0,a.jsxs)("span",{className:t.todayProfit>0?"up":t.todayProfit<0?"down":"",children:[t.todayProfit>0?"+":"","\xa5",t.todayProfit.toFixed(2)]})]}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)("span",{children:"收益率"}),(0,a.jsxs)("span",{className:t.profitRate>0?"up":t.profitRate<0?"down":"",children:[t.profitRate>0?"+":"",t.profitRate.toFixed(2),"%"]})]})]})]}):null})(),e.estPricedCoverage>.05&&(0,a.jsxs)("div",{style:{fontSize:"10px",color:"var(--muted)",marginTop:-8,marginBottom:10,textAlign:"right"},children:["基于 ",Math.round(100*e.estPricedCoverage),"% 持仓估算"]}),(0,a.jsx)("div",{style:{marginBottom:8,cursor:"pointer",userSelect:"none"},className:"title",onClick:()=>eK(e.code),children:(0,a.jsxs)("div",{className:"row",style:{width:"100%",flex:1},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,a.jsx)("span",{children:"前10重仓股票"}),(0,a.jsx)(x,{width:"16",height:"16",className:"muted",style:{transform:G.has(e.code)?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]}),(0,a.jsx)("span",{className:"muted",children:"涨跌幅 / 占比"})]})}),(0,a.jsx)(n.M,{children:!G.has(e.code)&&(0,a.jsx)(l.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},style:{overflow:"hidden"},children:Array.isArray(e.holdings)&&e.holdings.length?(0,a.jsx)("div",{className:"list",children:e.holdings.map((e,t)=>(0,a.jsxs)("div",{className:"item",children:[(0,a.jsx)("span",{className:"name",children:e.name}),(0,a.jsxs)("div",{className:"values",children:["number"==typeof e.change&&(0,a.jsxs)("span",{className:"badge ".concat(e.change>0?"up":e.change<0?"down":""),style:{marginRight:8},children:[e.change>0?"+":"",e.change.toFixed(2),"%"]}),(0,a.jsx)("span",{className:"weight",children:e.weight})]})]},t))}):(0,a.jsx)("div",{className:"muted",style:{padding:"8px 0"},children:"暂无重仓数据"})})})]})})},e.code)})})})]},en)})]})]})]}),(0,a.jsxs)("div",{className:"footer",children:[(0,a.jsx)("p",{children:"数据源：实时估值与重仓直连东方财富，仅供个人学习及参考使用。数据可能存在延迟，不作为任何投资建议"}),(0,a.jsx)("p",{children:"注：估算数据与真实结算数据会有1%左右误差，非股票型基金误差较大"}),(0,a.jsx)("div",{style:{marginTop:12,opacity:.8},children:(0,a.jsxs)("p",{children:["遇到任何问题或需求建议可",(0,a.jsx)("button",{className:"link-button",onClick:()=>{eh(e=>e+1),ec(!0)},style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer",padding:"0 4px",textDecoration:"underline",fontSize:"inherit",fontWeight:600},children:"点此提交反馈"})]})})]}),(0,a.jsx)(n.M,{children:eo&&(0,a.jsx)(S,{onClose:()=>ec(!1)},ed)}),(0,a.jsx)(n.M,{children:ek&&(0,a.jsx)(C,{failures:eC,onClose:()=>eS(!1)})}),(0,a.jsx)(n.M,{children:ee&&(0,a.jsx)(B,{allFunds:t,currentGroupCodes:(null===(e=U.find(e=>e.id===V))||void 0===e?void 0:e.codes)||[],onClose:()=>et(!1),onAdd:e=>{if(!e||0===e.length)return;let t=U.map(t=>t.id===V?{...t,codes:Array.from(new Set([...t.codes,...e]))}:t);q(t),localStorage.setItem("groups",JSON.stringify(t)),et(!1),eX({open:!0,message:"成功添加 ".concat(e.length," 支基金")})}})}),(0,a.jsx)(n.M,{children:Z&&(0,a.jsx)(A,{groups:U,onClose:()=>Q(!1),onSave:e=>{q(e),localStorage.setItem("groups",JSON.stringify(e)),"all"===V||"fav"===V||e.find(e=>e.id===V)||X("all")}})}),(0,a.jsx)(n.M,{children:$&&(0,a.jsx)(L,{onClose:()=>K(!1),onConfirm:e=>{let t={id:"group_".concat(Date.now()),name:e,codes:[]},s=[...U,t];q(s),localStorage.setItem("groups",JSON.stringify(s)),X(t.id),K(!1)}})}),(0,a.jsx)(n.M,{children:eV.open&&(0,a.jsx)(I,{message:eV.message,onClose:()=>eX({open:!1,message:""})})}),(0,a.jsx)(n.M,{children:eI&&(0,a.jsx)(z,{fund:eI.fund,onClose:()=>eE(null),onSave:(e,t)=>e9(eI.code,e,t)})}),(0,a.jsx)(n.M,{children:eP&&(0,a.jsx)(M,{onClose:()=>eO(!1),searchTerm:em,setSearchTerm:eu,searchResults:ep,selectedFunds:eg,setSelectedFunds:ey,toggleSelectFund:e=>{ey([e])},isSearching:ej,handleSearchInput:e=>{let t=e.target.value;eu(t),ev.current&&clearTimeout(ev.current),ev.current=setTimeout(()=>e5(t),300)},showDropdown:ew,setShowDropdown:eN,dropdownRef:eb,funds:t,addFund:e8,loading:r,error:c,newHoldingAmount:eA,setNewHoldingAmount:eB,newAccumulatedProfit:eL,setNewAccumulatedProfit:eW})}),O&&(0,a.jsx)("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"设置",children:(0,a.jsxs)("div",{className:"glass card modal",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"title",style:{marginBottom:12},children:[(0,a.jsx)(u,{width:"20",height:"20"}),(0,a.jsx)("span",{children:"设置"}),(0,a.jsx)("span",{className:"muted",children:"配置刷新频率"})]}),(0,a.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,a.jsx)("div",{className:"muted",style:{marginBottom:8,fontSize:"0.8rem"},children:"刷新频率"}),(0,a.jsx)("div",{className:"chips",style:{marginBottom:12},children:[10,30,60,120,300].map(e=>(0,a.jsxs)("button",{type:"button",className:"chip ".concat(D===e?"active":""),onClick:()=>R(e),"aria-pressed":D===e,children:[e," 秒"]},e))}),(0,a.jsx)("input",{className:"input",type:"number",min:"5",step:"5",value:D,onChange:e=>R(Number(e.target.value)),placeholder:"自定义秒数"})]}),(0,a.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,a.jsx)("div",{className:"muted",style:{marginBottom:8,fontSize:"0.8rem"},children:"数据导出"}),(0,a.jsx)("div",{className:"row",style:{gap:8},children:(0,a.jsx)("button",{type:"button",className:"button",onClick:ts,children:"导出配置"})}),(0,a.jsx)("div",{className:"muted",style:{marginBottom:8,fontSize:"0.8rem",marginTop:26},children:"数据导入"}),(0,a.jsx)("div",{className:"row",style:{gap:8,marginTop:8},children:(0,a.jsx)("button",{type:"button",className:"button",onClick:()=>{var e,t;return null===(t=e7.current)||void 0===t?void 0:null===(e=t.click)||void 0===e?void 0:e.call(t)},children:"导入配置"})}),(0,a.jsx)("input",{ref:e7,type:"file",accept:"application/json",style:{display:"none"},onChange:ta}),te&&(0,a.jsx)("div",{className:"muted",style:{marginTop:8},children:te})]}),(0,a.jsx)("div",{className:"row",style:{justifyContent:"flex-end",marginTop:24},children:(0,a.jsx)("button",{className:"button",onClick:e=>{var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);let s=1e3*Math.max(5,Number(D));P(s),localStorage.setItem("refreshMs",String(s)),F(!1)},children:"保存并关闭"})})]})})]})}}},function(e){e.O(0,[340,971,23,744],function(){return e(e.s=729)}),_N_E=e.O()}]);